defaultSettings: &defaults
  author: <author>
  license: MIT License
  version: ~0.1.1
  projectName: <projectName>
  createdAt: <currentDate>

format: Azure SQL Data Warehouse
templates:
  - name: "DIM: SCD2 upsert procedure"
    <<: *defaults
    description: "Dimension SCD Type 2 procedure"
    templateFileName: Azure SQL Data Warehouse/dim.scd2.proc.njk
    outputFileName: "/3NF/Dim SCD2 procedures/{destSchema}.sp{destTable}.scd2.sql"
    destSchema: "dimension schema for {srcSchema}"
    destTable: "{ObjectName}"
    spSchema: "{destSchema}"
    spName: "sp{ObjectName}"
    objectNameMask: <exclusionMaskArray>
    wizardQuestions:
      - Naming Format
      - Select Source Table
      - Select Source Columns
      - Select Source PK Columns
      - Object Name
      - Destination Schema
      - Destination Table
      - Procedure Name
  - name: "3NF: SCD2 upsert procedure"
    <<: *defaults
    description: "3NF SCD Type 2 procedure"
    templateFileName: Azure SQL Data Warehouse/3nf.scd2.proc.njk
    outputFileName: "/3NF/SCD2 procedures/{destSchema}.sp{destTable}.scd2.sql"
    destSchema: "dimension schema for {srcSchema}"
    destTable: "{ObjectName}"
    spSchema: "{destSchema}"
    spName: "sp{ObjectName}"
    objectNameMask: <exclusionMaskArray>
    wizardQuestions:
      - Naming Format
      - Select Source Table
      - Select Source Columns
      - Select Source PK Columns
      - Object Name
      - Destination Schema
      - Destination Table
      - Procedure Name
  - name: "3NF: SCD1 upsert procedure"
    <<: *defaults
    description: "3NF SCD Type 1 procedure"
    templateFileName: Azure SQL Data Warehouse/3nf.scd1.proc.njk
    outputFileName: "/3NF/SCD1 procedures/{destSchema}.sp{destTable}.sql"
    destSchema: "dimension schema for {srcSchema}"
    destTable: "{ObjectName}"
    spSchema: "{destSchema}"
    spName: "sp{ObjectName}"
    objectNameMask: <exclusionMaskArray>
    wizardQuestions:
      - Naming Format
      - Select Source Table
      - Select Source Columns
      - Select Source PK Columns
      - Object Name
      - Destination Schema
      - Destination Table
      - Procedure Name
  - name: "3NF: Stage upsert procedure"
    <<: *defaults
    description: "3NF stage procedure"
    templateFileName: Azure SQL Data Warehouse/3nf.stage.proc.njk
    outputFileName: "/3NF/Stage procedures/{destSchema}.sp{destTable}.sql"
    destSchema: "stage schema for {srcSchema}"
    destTable: "{ObjectName}"
    spSchema: "{destSchema}"
    spName: "sp{ObjectName}"
    objectNameMask: <exclusionMaskArray>
    wizardQuestions:
      - Naming Format
      - Select Source Table
      - Select Source Columns
      - Select Source PK Columns
      - Object Name
      - Destination Schema
      - Destination Table
      - Procedure Name
  - name: "3NF: Fact upsert procedure"
    <<: *defaults
    description: "3NF Fact procedure (full load)"
    templateFileName: Azure SQL Data Warehouse/3nf.fact.proc.njk
    outputFileName: "/3NF/Fact procedures/{destSchema}.sp{destTable}.sql"
    destSchema: "fact schema for {srcSchema}"
    destTable: "{ObjectName}"
    spSchema: "{destSchema}"
    spName: "sp{ObjectName}"
    objectNameMask: <exclusionMaskArray>
    wizardQuestions:
      - Naming Format
      - Select Source Table
      - Select Source Columns
      - Select Source PK Columns
      - Object Name
      - Destination Schema
      - Destination Table
      - Procedure Name
  - name: "External: create external BS table"
    <<: *defaults
    description: "Dynamically assign a source blob file"
    templateFileName: Azure SQL Data Warehouse/external.bs.select.njk
    outputFileName: "/External/SProc/{spSchema}.{spName}.sql"
    destSchema: "ext"
    destTable: "{objectName}"
    spSchema: "{destSchema}"
    spName: "bs.{objectName}"
    objectNameMask: /raw_/g
    wizardQuestions:
      - Select Source Table
      - Select Source Columns
      - Object Name
      - Destination Schema
      - Procedure Name
  - name: "Data Domain: Master Data"
    <<: *defaults
    description: "Master Data table with history"
    templateFileName: Azure SQL Data Warehouse/domain.master.njk
    outputFileName: "/3NF/domain/masterData/{destSchema}.sp{destTable}.sql"
    destSchema: ""
    destTable: "{ObjectName}"
    spSchema: "{destSchema}"
    spName: "sp{ObjectName}"
    objectNameMask: <exclusionMaskArray>
    wizardQuestions:
      - Naming Format
      - Select Source Table
      - Select Source Columns
      - Select Source PK Columns
      - Object Name
      - Destination Schema
      - Destination Table
      - Select Destination Columns
      - Procedure Name
