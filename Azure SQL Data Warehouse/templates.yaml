defaultSettings: &defaults
  author:
  description: MIT licence
  createdAt: { currentDateLong }
  version: ~0.1.0
  settings:
    - type: ColumnExclusionList
      values:
        - isRowCurrent
        - rowChangeType
        - rowHashType
        - rowStartDate
        - rowEndDate
        - sessionNo
        - packageName
        - loadDateTime

format: Azure SQL Data Warehouse
templates:
  - name: 'Stage: create table'
    <<: *defaults
    description: 'Create standard staging table'
    templateFileName: stage.table.create.njk
    outputFileName: /Stage/Table/{@DestSchema}.stage_{@ObjectName}.sql
    destSchema: stage
    destTable: stage_{ObjectName}
    objectNameMask:
    wizardQuestions:
      - Select Source Table
      - Select Source Columns
      - { ObjectName }
      - { DestSchema }
      - Set Column Name format
  - name: 'External: select external table source file'
    description: 'Dynamically assign a source blob file'
    templateFileName: external.table.select.njk
    outputFileName: /External/SProc/{spSchema}.{spName}.sql
    destSchema: ext
    destTable: { ObjectName }
    spSchema: ext
    spName: select.{ObjectName}
    objectNameMask: /raw_/g
    wizardQuestions:
      - Select Source Table
      - Select Source Columns
      - { ObjectName }
      - { DestSchema }
